# FluoJupyter

FluoJupyter is a Jupyter Notebook to analyze X-Ray Fluorescence (XRF) experiments on the beamline SIRIUS at the synchrotron SOLEIL. The notebook should be first set up by an Expert following the instructions in the "Expert" section. Users can then follow the guidelines in the "User" section to start using the notebook.

## User

## Expert

### Getting Started

Copy the files FluoJupyter.ipynb, FluoJupyter_functions.py, PyNexus.py and DefaultPeaks.csv on the local folder where the nxs files are. The nxs files should contain 'Fluo' in their name. Note that the notebook does not work with JupyterLab in its current version.

The aim of the Expert part is to determine the parameters in the first cell. It can be quite painful, but those parameters should not vary during an experiment. It is also possible to copy directly the parameters from a previous experiment (or from the examples provided here), and test if they are good for your current experimental setup.

### Conversion channels <-> eVs
First update the parameters 'gain' and 'eV0':
```
dparams_general['gain'] = 10.
dparams_general['eV0'] = 0.
```
used to convert the channels in eVs through the relation:
```
eVs = gain*channels + eV0
```

### Determine the list of peaks
1) Run the cell with the pameters, and the cells with the command:
```
generate_cells_on_click()
```
2) Click on the button.

3) Enter the required information (or just try with the default values) in the widgets generated by the cell:  
```
expmt = Experiment(dparams_general, dparams_fit)
```
4) Extract about 10 spectrums from the file, and try to choose the nicest one (without any weird behavior). Choose a range of channels covering from the lowest peak you want to fit to the end of the elastic peak.
If you want to change the default values displayed in the box when you later reload the experiment, update the parameters:
```
dparams_general['ind_first_spectrum'] = 0
dparams_general['ind_last_spectrum'] = 1
dparams_general['ind_first_channel'] = 0
dparams_general['ind_last_channel'] = 2048
dparams_general['is_elements'] = [False, False, False, False, True]
```

** Warning:** Any time you update a value from the first cell (in dparams_general or dparams_fit), you need to re-execute the cell, and the to reload the experiment by executing the cell
```
expmt = Experiment(dparams_general, dparams_fit)
```


### Prerequisites

What things you need to install the software and how to install them

```
Give examples
```

## Authors

* **Billie Thompson** - *Initial work* - [PurpleBooth](https://github.com/PurpleBooth)

See also the list of [contributors](https://github.com/your/project/contributors) who participated in this project.

## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details

## Acknowledgments

* Hat tip to anyone whose code was used
* Inspiration
* etc
